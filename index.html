<!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>GulaMerlin&#39;s only Py file</title>
  <meta name="author" content="Jian Jun">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="GulaMerlin&#39;s only Py file">

  
    <meta property="og:image" content="">
  

  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-70812759-1', 'auto');
  ga('send', 'pageview');
</script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?cb5448498d7169c668b07c2b255d62c1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


</head>
</html>
 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">GulaMerlin&#39;s only Py file</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class=""></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class=""></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class=""></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class=""></i>About
			</a>
		  </li>
		  
		  <li>
			<a href="/atom.xml" title="Subscribe me.">
			  <i class=""></i>RSS
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header logo">
  <h1>python<span class="blink-fast">∎</span></h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <i class="fa fa-heart blink-slow"></i>
      Keep and carry on.
</div>    
		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2018/10/12/Linux命令/">command</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2018-10-12  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<ul>
<li><h4 id="ssh-root-公网ip地址-47-107-175-211-—-登陆服务器"><a href="#ssh-root-公网ip地址-47-107-175-211-—-登陆服务器" class="headerlink" title="ssh root@公网ip地址(47.107.175.211)    —-登陆服务器"></a>ssh root@公网ip地址(47.107.175.211)    —-登陆服务器</h4></li>
</ul>
<h3 id="服务器基本命令-Linux系统"><a href="#服务器基本命令-Linux系统" class="headerlink" title="服务器基本命令(Linux系统)"></a>服务器基本命令(Linux系统)</h3><hr>
<table>
<thead>
<tr>
<th>服务器基本命令(Linux系统)</th>
<th>服务器基本命令(Linux系统)</th>
</tr>
</thead>
<tbody>
<tr>
<td>命令+–help</td>
<td>查看帮助</td>
</tr>
<tr>
<td>man(manual)+命令</td>
<td>查看命令手册</td>
</tr>
<tr>
<td>tab键</td>
<td>补全路径或命令</td>
</tr>
<tr>
<td>control+c</td>
<td>强行中断命令</td>
</tr>
<tr>
<td>cat(concatenate)</td>
<td>链接文件内容</td>
</tr>
<tr>
<td>who</td>
<td>查看所有登陆记录</td>
</tr>
<tr>
<td>who am i</td>
<td>查看当前登陆信息</td>
</tr>
<tr>
<td>last</td>
<td>查看最佳登陆信息</td>
</tr>
<tr>
<td>clear</td>
<td>清楚屏幕输出</td>
</tr>
<tr>
<td>cal</td>
<td>查看日历</td>
</tr>
<tr>
<td>date</td>
<td>查看系统时间</td>
</tr>
<tr>
<td>history</td>
<td>查看历史命令</td>
</tr>
<tr>
<td>！+历史命令编号</td>
<td>重新执行该编号对应的命令</td>
</tr>
<tr>
<td></td>
</tr>
</tbody>
</table>
	
	</div>
  <a type="button" href="/2018/10/12/Linux命令/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2018/11/12/Django/">Django</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2018-11-12  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h1 id="Django"><a href="#Django" class="headerlink" title="Django"></a>Django</h1><h3 id="创建virtualenv虚拟环境"><a href="#创建virtualenv虚拟环境" class="headerlink" title="创建virtualenv虚拟环境"></a>创建virtualenv虚拟环境</h3><p>​    1.virtualenv的创建</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install virtualenv</span><br></pre></td></tr></table></figure>
<p>​    2.配置创建虚拟环境</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virtualenv -p /Library/Frameworks/Python.framework/Versions/3.6/bin/python3.6 --no-site-packages env1</span><br></pre></td></tr></table></figure>
<p>​    4.激活</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">	  cd env1/bin</span><br><span class="line">执行: source activate</span><br><span class="line">退出: deactivate</span><br></pre></td></tr></table></figure>
<p>​    5.进入虚拟环境安装django<br>​        <figure class="highlight plain"><figcaption><span>install django```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">### 搭建项目</span><br><span class="line"></span><br><span class="line">​	1.进入虚拟环境</span><br><span class="line">​		source ./env1/bin/activate</span><br><span class="line">​	2.进入项目目录并创建项目</span><br><span class="line">​		django-admin startproject project_name</span><br><span class="line">​	3.创建应用</span><br><span class="line">​		python manage.py startapp app_name </span><br><span class="line">&lt;!-- more --&gt;</span><br><span class="line">### 路由配置</span><br><span class="line"></span><br><span class="line">​	在工程目录的urls.py周公定义路由:</span><br><span class="line"></span><br><span class="line">​		url(正则, 视图参数(调用的方法))</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(r&apos;^admin/&apos;, admin.site.urls),</span><br><span class="line">    # 定义路由返回hello world</span><br><span class="line">    # http://127.0.0.1:8000/hello/</span><br><span class="line">    url(r&apos;^hello/&apos;, views.hello),</span><br><span class="line">    #url(r&apos;^$&apos;, veiws.my_homepage_view), - index页面</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<h3 id="模型迁移-与User信息添加"><a href="#模型迁移-与User信息添加" class="headerlink" title="模型迁移, 与User信息添加"></a>模型迁移, 与User信息添加</h3><ol>
<li><p><strong>在setting.py文件中定义DATABASES</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">'default'</span>: &#123;</span><br><span class="line">        <span class="string">'ENGINE'</span>: <span class="string">'django.db.backends.mysql'</span>,</span><br><span class="line">        <span class="string">'NAME'</span>: <span class="string">'django'</span>,</span><br><span class="line">        <span class="comment">#数据库的名字</span></span><br><span class="line">        <span class="string">'USER'</span>: <span class="string">'root'</span>,</span><br><span class="line">        <span class="string">'PASSWORD'</span>: <span class="string">'123456'</span>,</span><br><span class="line">        <span class="string">'HOST'</span>: <span class="string">'127.0.0.1'</span>,</span><br><span class="line">        <span class="string">'PORT'</span>: <span class="number">3306</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>迁移django自带的表</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line">迁移之前需要 pip install pymysql (python3不支持MYSQLdb)</span><br><span class="line">在项目中__init__.py文件写入:</span><br><span class="line">import pymysql</span><br><span class="line">pymysql.install_as_MySQLdb()</span><br><span class="line">然后命令执行</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>模型定义映射</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在models.py中创建模型类</span></span><br><span class="line"><span class="comment">#a.定义模型</span></span><br><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    name = models.CharField(max_length=<span class="number">10</span>, unique=<span class="keyword">True</span>)</span><br><span class="line">    age = models.IntegerField(default=<span class="number">1</span>)</span><br><span class="line">    gender = models.BooleanField(default=<span class="number">1</span>)</span><br><span class="line">  <span class="string">"""字段定义</span></span><br><span class="line"><span class="string">    字符串 CharField</span></span><br><span class="line"><span class="string">    整型   IntegerField</span></span><br><span class="line"><span class="string">    布尔   BooleanField</span></span><br><span class="line"><span class="string">    日期   DatetimeField、DateField、TimeField</span></span><br><span class="line"><span class="string">    自增   AutoField</span></span><br><span class="line"><span class="string">    图片   ImageField</span></span><br><span class="line"><span class="string">  约束定义</span></span><br><span class="line"><span class="string">    是否唯一 unipue</span></span><br><span class="line"><span class="string">    是否为空 null</span></span><br><span class="line"><span class="string">    默认值 default</span></span><br><span class="line"><span class="string">    默认时间 auto_now_add</span></span><br><span class="line"><span class="string">    修改时间 auto_now</span></span><br><span class="line"><span class="string">b.迁移</span></span><br><span class="line"><span class="string">迁移之前需要pip install pymysql (python3不支持MYSQLdb)</span></span><br><span class="line"><span class="string">在项目中\__init__.py文件写入:</span></span><br><span class="line"><span class="string">import pymysql</span></span><br><span class="line"><span class="string">pymysql.install_as_MySQLdb()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">配置settings.py - INSTALLED_APPS - 添加app(告诉Django)</span></span><br><span class="line"><span class="string">python manage.py makemigrations app - 命令执行生成迁移文件</span></span><br><span class="line"><span class="string">python manage.py migrate - 然后命令执行迁移文件</span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ORM，对象关系映射</strong></p>
<ol>
<li><p>查询filter() ==&gt; ‘select * from xxx’</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db.models <span class="keyword">import</span> Avg, Count, Max, Min, Sum, Q, F</span><br><span class="line"><span class="comment">#查询</span></span><br><span class="line">    <span class="comment"># 查询年龄=18的学生信息</span></span><br><span class="line">    stus = Student.objects.filter(age=<span class="number">18</span>)</span><br><span class="line">    <span class="comment"># 查询所有学生</span></span><br><span class="line">    stus = Student.objects.all()</span><br><span class="line">    <span class="comment"># 查询name=xxx的学生信息</span></span><br><span class="line">    <span class="comment"># get(): 获取有且仅有一条数据，否则报错</span></span><br><span class="line">    stu = Student.objects.get(name=<span class="string">'野原新之助'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取不叫野原新之助的学生信息</span></span><br><span class="line">    stus = Student.objects.exclude(name=<span class="string">'野原新之助'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询年龄等于18且性别等于女</span></span><br><span class="line">    stus = Student.objects.filter(age=<span class="number">18</span>, gender=<span class="number">0</span>)</span><br><span class="line">    stus = Student.objects.filter(age=<span class="number">18</span>).filter(gender=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取对象的值</span></span><br><span class="line">    stus_value = Student.objects.all().values()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 降序 order_by</span></span><br><span class="line">    stus = Student.objects.all().order_by(<span class="string">'-id'</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment">#运算符    </span></span><br><span class="line">    <span class="comment"># 查询姓名中包含'野'的学生信息，contains(大小写敏感)，icontains(大小写不敏感)</span></span><br><span class="line">    <span class="comment"># 类似于 like '%野%'</span></span><br><span class="line">    stus = Student.objects.filter(name__contains=<span class="string">'野'</span>)</span><br><span class="line">    <span class="comment"># 类似于 like '%野'</span></span><br><span class="line">    stus = Student.objects.filter(name__endswith=<span class="string">'野'</span>)</span><br><span class="line">    <span class="comment"># 类似于 like '野%'</span></span><br><span class="line">    stus = Student.objects.filter(name__startswith=<span class="string">'野'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># sql ：select * from xxx where id in (1, 2, 3)</span></span><br><span class="line">    stus = Student.objects.filter(id__in=[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line">    <span class="comment"># pk代表主键</span></span><br><span class="line">    stus = Student.objects.filter(pk__in=[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 大于：__gt__、大于等于: __gte__、</span></span><br><span class="line">    <span class="comment"># 小于: __lt__、小于等于: __lte__</span></span><br><span class="line">    stus = Student.objects.filter(age__lt=<span class="number">19</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#聚合</span></span><br><span class="line">    <span class="comment"># 查询平均年龄 聚合aggregate</span></span><br><span class="line">    avg_age = Student.objects.all().aggregate(Avg(<span class="string">'age'</span>))</span><br><span class="line">    print(avg_age)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 或者条件，非条件，并且条件</span></span><br><span class="line">    <span class="comment"># 查询age = 18 或者gender=1的学生信息</span></span><br><span class="line">    <span class="comment"># Q() 与或非</span></span><br><span class="line">    stus = Student.objects.filter(Q(age=<span class="number">18</span>), Q(gender=<span class="number">1</span>))</span><br><span class="line">    stus = Student.objects.filter(Q(age=<span class="number">18</span>) &amp; Q(gender=<span class="number">1</span>))</span><br><span class="line">    stus = Student.objects.filter(Q(age=<span class="number">18</span>) | Q(gender=<span class="number">1</span>))</span><br><span class="line">    stus = Student.objects.filter(~Q(age=<span class="number">18</span>) | Q(gender=<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询english比math大学生信息</span></span><br><span class="line">    <span class="comment"># F()：对字段进行计算</span></span><br><span class="line">    stus = Student.objects.filter(english__gt=F(<span class="string">'math'</span>))</span><br><span class="line">    <span class="comment"># 查询english比math大十分学生信息</span></span><br><span class="line">    stus = Student.objects.filter(english__gt=F(<span class="string">'math'</span>)+<span class="number">10</span>)</span><br><span class="line">    <span class="comment"># 获取学生的姓名</span></span><br><span class="line">    stus_names = [stu.name+<span class="string">'\t'</span> <span class="keyword">for</span> stu <span class="keyword">in</span> stus]</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改update()</p>
<blockquote>
<p>​ 模型名.objects.update(xxx=’abc’)</p>
<p>​ 模型对象.save()</p>
</blockquote>
</li>
<li><p>删除delete()</p>
<blockquote>
<p>​ 模型对象.delete()</p>
</blockquote>
</li>
<li><p>创建save()</p>
<blockquote>
<p>模型名.bojects.create(xxx=’abc’, yyy=123)</p>
<p>模型对象.save()</p>
</blockquote>
</li>
<li><p>模型一对一</p>
<p>定义一对一：OneToOneField()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StuInfo</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    phone = models.CharField(max_length=<span class="number">11</span>)</span><br><span class="line">    address = models.CharField(max_length=<span class="number">20</span>)</span><br><span class="line">    <span class="comment"># OneToOneField等价于ForeignKey，且约束unique=True 定义在任何一方都可以</span></span><br><span class="line">    stu = models.OneToOneField(Student)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        db_table = <span class="string">'stuInfo'</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>正向查询，已知Student对象，查询StuInfo对象：Student.StuInfo</p>
<p>反向查询，已知StuInfo对象，查询Student对象:   StuInfo.Student</p>
</blockquote>
</li>
<li><p>模型一对多</p>
<p>定义一对多: ForeignKey()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grade</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    g_name = models.CharField(max_length=<span class="number">10</span>)</span><br><span class="line">    create_time = models.DateTimeField(auto_now_add=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        db_table = <span class="string">'grade'</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    <span class="comment"># 省略以上代码</span></span><br><span class="line">    <span class="comment"># 指定学生和班级的关联关系,foreignKey定义在多的那一方</span></span><br><span class="line">    g = models.ForeignKey(Grade, null=<span class="keyword">True</span>)</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        db_table = <span class="string">'student'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>模型多对多</p>
<p>定义多对多:ManyToManyField</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Course</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    c_name = models.CharField(max_length=<span class="number">10</span>)</span><br><span class="line">    <span class="comment"># ManyToManyField 字段定义在关联的任何一个模型中都可以</span></span><br><span class="line">    stu = models.ManyToManyField(Student)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        db_table = <span class="string">'course'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>查询</p>
<p>​ 已知学生对象 stu: 查询班级: stu.g  查询拓展表: stu.stu_info  查询课程: stu.c</p>
<p>​ 已知拓展表stu_info对象 查询学生: stu_info.student</p>
<p>​ 已知班级grade对象 查询学生: grade.student_set</p>
<p>​ 已知课程course对象 查询学生: course.student_set</p>
</li>
</ol>
</li>
</ol>
<ol start="5">
<li><p><strong>创建超级管理员</strong></p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py createsuperuser</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="表单验证"><a href="#表单验证" class="headerlink" title="表单验证"></a>表单验证</h3><ol>
<li><p>migrations创建Artform.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django <span class="keyword">import</span> forms</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AddArtForm</span><span class="params">(forms.Form)</span>:</span></span><br><span class="line">    <span class="comment"># required=True表示必填</span></span><br><span class="line">    title = forms.CharField(min_length=<span class="number">5</span>, required=<span class="keyword">True</span>,</span><br><span class="line">                            error_messages=&#123;</span><br><span class="line">                                <span class="string">'required'</span>: <span class="string">'文章标题必填'</span>,</span><br><span class="line">                                <span class="string">'min_length'</span>: <span class="string">'文章标题不能少于5个字符'</span></span><br><span class="line">                            &#125;)</span><br><span class="line">    desc = forms.CharField(min_length=<span class="number">5</span>, required=<span class="keyword">True</span>, error_messages=&#123;</span><br><span class="line">                                <span class="string">'required'</span>: <span class="string">'文章描述必填'</span>,</span><br><span class="line">                                <span class="string">'min_length'</span>: <span class="string">'文章描述不能少于5个字符'</span></span><br><span class="line">                            &#125;)</span><br><span class="line">    content = forms.CharField(required=<span class="keyword">True</span>, error_messages=&#123;</span><br><span class="line">                                <span class="string">'required'</span>: <span class="string">'文章内容必填'</span>,</span><br><span class="line">                            &#125;)</span><br><span class="line">    icon = forms.ImageField(required=<span class="keyword">True</span>, error_messages=&#123;</span><br><span class="line">        <span class="string">'required'</span>: <span class="string">'请上传图片'</span></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用表单</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">form = AddArtForm(request.POST, request.FILES)</span><br><span class="line">form.is_valid() <span class="comment">#验证是否成功或者失败</span></span><br><span class="line">form.errors <span class="comment">#获取验证失败的错误信息</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="模版"><a href="#模版" class="headerlink" title="模版"></a>模版</h3><ol>
<li><p>解析标签:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">​   &#123;% 标签 %&#125; </span><br><span class="line"></span><br><span class="line">​  标签有for、if、comment、static、ifequal、block、extends</span><br></pre></td></tr></table></figure>
</li>
<li><p>解析变量:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">​  &#123;&#123; 变量 &#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>循环:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">​  for loop.counter</span><br><span class="line"></span><br><span class="line">​  forloop.revcounter</span><br><span class="line"></span><br><span class="line">​  forloop.last</span><br><span class="line"></span><br><span class="line">​  forloop.first</span><br></pre></td></tr></table></figure>
</li>
<li><p>继承</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">​  &#123;% block xxx %&#125;</span><br><span class="line"></span><br><span class="line">​    &#123;&#123; block.super &#125;&#125;</span><br><span class="line"></span><br><span class="line">​  &#123;% endblock  %&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>静态加载(setting.py):</p>
<p>–静态文件配置</p>
<p>STATICFILES_DIRS = [</p>
<p>​  os.path.join(BASE_DIR, ‘static’)</p>
<p>]</p>
<p>第一种方式:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;link href=&quot;/static/css/index.css&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>第二种</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static  %&#125;</span><br><span class="line"></span><br><span class="line">&lt;link href=&quot;&#123;% static &apos;css/index.css&apos; %&#125;&quot; rel=&quot;stylesheet&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>–媒体文件media配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MEDIA_URL = &apos;/media/&apos;</span><br><span class="line"></span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, &apos;media&apos;)</span><br></pre></td></tr></table></figure>
<p>需要在工程目录urls.py文件中配置解析media的路由</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from django.contrib.staticfiles.urls import static</span><br><span class="line"></span><br><span class="line">urlpatterns += static(MEDIA_URL, document_root=MEDIA_ROOT)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h3><ol>
<li><p>使用切片进行分页</p>
</li>
<li><p>使用Paginator进行分页</p>
</li>
<li><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">paginator = Paginator(需要分页的总数, 一页数据条数)</span><br><span class="line">page = paginator.page(获取那一页的页码)</span><br><span class="line">page.number <span class="comment">#当前页</span></span><br><span class="line">page.paginator.num_pages <span class="comment">#当前有多少页</span></span><br><span class="line">page.paginator.count <span class="comment">#一共多少页</span></span><br><span class="line">page.paginator.page_range <span class="comment">#页码</span></span><br><span class="line">page.has_previous <span class="comment">#上一页</span></span><br><span class="line">page.has_next <span class="comment">#下一页</span></span><br><span class="line">page.previous_pag_number <span class="comment">#上一页页码</span></span><br><span class="line">page.next_page_number <span class="comment">#下一页页码</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="图片上传"><a href="#图片上传" class="headerlink" title="图片上传"></a>图片上传</h3><ol>
<li><p>表单中必须要有enctype=”multipart/form-data”</p>
</li>
<li><p>视图中获取图片: reques.FILES</p>
</li>
<li><p>模型中定义保存图片的字段: models.ImageFiled(upload_to=’art’)</p>
</li>
<li><p>在setting.py文件中定义文件路径: MEDIA_ROOT, MEDIA_URL</p>
</li>
<li><p>页面解析图片: \<img src="/media/"></p>
<p>需要在工程目录urls.py文件中配置解析media的路由</p>
<p>​    from django.contrib.staticfiles.urls import static</p>
<p>​    urlpatterns += static(MEDIA_URL, document_root=MEDIA_ROOT)</p>
</li>
</ol>
<h3 id="djangorestframework框架"><a href="#djangorestframework框架" class="headerlink" title="djangorestframework框架"></a>djangorestframework框架</h3><ol>
<li><h4 id="包的导入"><a href="#包的导入" class="headerlink" title="包的导入"></a>包的导入</h4></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install djangorestframework==3.4.6</span><br><span class="line">pip install django-filter  # Filtering support</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><p>####接口、资源、请求方式</p>
<p>接口: 后端返回的事json格式的数据</p>
<blockquote>
<p>GET 127.0.0.1:8080/api/student/ 查询所有学生信息</p>
<p>POST …/api/student/    创建学生信息</p>
<p>PUT/ PATCH …/api/student/id/    修改学生信息</p>
<p>DELETE    …/api/student/id/    删除学生信息    </p>
<p>DET …/api/studnet/id/       查询指定id学生信息</p>
</blockquote>
<p>资源: 操作数据库中学生的信息，资源叫做student</p>
<p>请求方式: GET / POST / PUT / PATCH / DELETE</p>
</li>
<li><p>####定义路由</p>
<p>获取路由: rounter = SimpleRouter()</p>
<p>注册资源: rounter.register(‘student’, StudentView)</p>
<p>获取urls地址: rounter.urls</p>
<p>解析url地址: urlpatterns += router.urls</p>
</li>
<li><p>####定义处理路由的业务逻辑</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleView</span><span class="params">(viewsets.GenericViewSet,</span></span></span><br><span class="line"><span class="class"><span class="params">                  mixins.ListModelMixin,</span></span></span><br><span class="line"><span class="class"><span class="params">                  mixins.DestroyModelMixin,</span></span></span><br><span class="line"><span class="class"><span class="params">                  mixins.CreateModelMixin,</span></span></span><br><span class="line"><span class="class"><span class="params">                  mixins.UpdateModelMixin,</span></span></span><br><span class="line"><span class="class"><span class="params">                  mixins.RetrieveModelMixin)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查询返回的数据</span></span><br><span class="line">    queryset = Article.objects.filter(is_delate=<span class="number">0</span>)</span><br><span class="line">    <span class="comment"># 序列化返回的文章数据</span></span><br><span class="line">    serializer_class = ArticleSerializer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 重写删除方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">perform_destroy</span><span class="params">(self, instance)</span>:</span></span><br><span class="line">        instance.is_delate = <span class="number">1</span></span><br><span class="line">        instance.save()</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleSerializer</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        <span class="comment"># 序列化的模型</span></span><br><span class="line">        model = Article</span><br><span class="line">        <span class="comment"># 需要序列化的字符安</span></span><br><span class="line">        fields = [<span class="string">'id'</span>, <span class="string">'name'</span>, <span class="string">'sex'</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p>####ajax</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;% csrf_token %&#125;</span><br><span class="line"><span class="keyword">var</span> csrf = $(<span class="string">'input[name="csrfmiddlewaretoken"]).val()</span></span><br><span class="line"><span class="string">$.ajax(&#123;</span></span><br><span class="line"><span class="string">	url: '</span><span class="string">',							# 请求地址</span></span><br><span class="line"><span class="string">	data: &#123;k, v&#125;,						# 传递参数</span></span><br><span class="line"><span class="string">	dataType: '</span>json<span class="string">',</span></span><br><span class="line"><span class="string">	type: '</span>POST/GET/PUT/PATCH/DELETE<span class="string">',	# http请求方式</span></span><br><span class="line"><span class="string">	success: function(data)&#123;</span></span><br><span class="line"><span class="string">		&#125;</span></span><br><span class="line"><span class="string">	error: function(data)&#123;</span></span><br><span class="line"><span class="string">		&#125;</span></span><br><span class="line"><span class="string">&#125;)</span></span><br><span class="line"><span class="string"># 简化版</span></span><br><span class="line"><span class="string">$.get(url, function(msg)&#123;&#125;)</span></span><br><span class="line"><span class="string">$.post(url, function(mes)&#123;&#125;)</span></span><br><span class="line"><span class="string">$(this).ajaxSubmit(&#123;</span></span><br><span class="line"><span class="string">	url: '</span><span class="string">',</span></span><br><span class="line"><span class="string">	type:'</span><span class="string">',</span></span><br><span class="line"><span class="string">	dataType: '</span>json<span class="string">',</span></span><br><span class="line"><span class="string">	success: function(data)&#123;&#125;,</span></span><br><span class="line"><span class="string">	error: function(data)&#123;&#125;</span></span><br><span class="line"><span class="string">&#125;)</span></span><br></pre></td></tr></table></figure>
<h3 id="CentOS启动项目"><a href="#CentOS启动项目" class="headerlink" title="CentOS启动项目"></a>CentOS启动项目</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python manage.py runserver</span><br><span class="line">python manage.py runserver 0.0.0.0 80</span><br></pre></td></tr></table></figure>
<blockquote>
<p>​    默认启动的IP是127.0.0.1, 默认的端口是8000</p>
</blockquote>
<h3 id="项目上线"><a href="#项目上线" class="headerlink" title="项目上线"></a>项目上线</h3><ol>
<li><p>安装数据库</p>
</li>
<li><p>安装python</p>
<p>Python3.6</p>
<p>在centos中，系统默认只提供python2.7的版本，但是项目我们使用的python3.6的版本。所有我们自己安装python3</p>
<p>####安装Python3的方法</p>
<p>首先安装依赖包</p>
<p>安装Python3.6所需要的依赖包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum -y groupinstall "Development tools"</span><br><span class="line"></span><br><span class="line">yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.python.org/ftp/python/3.6.2/Python-3.6.2.tar.xz</span><br><span class="line"></span><br><span class="line">然后解压压缩包，进入该目录，安装Python3</span><br><span class="line"></span><br><span class="line">tar -xvJf  Python-3.6.2.tar.xz</span><br><span class="line">cd Python-3.6.2</span><br><span class="line">./configure --prefix=/usr/local/python3</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<h4 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h4><p>#####1. 安装virtualenv</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install python-virtualenv</span><br></pre></td></tr></table></figure>
<p>#####2. 创建虚拟环境</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">virtualenv --no-site-packages env</span><br><span class="line"></span><br><span class="line">cd env</span><br><span class="line"></span><br><span class="line"># 激活虚拟环境</span><br><span class="line">source bin/activate</span><br></pre></td></tr></table></figure>
<p>#####3. 安装环境需要的包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip3 install -r re_install.txt</span><br><span class="line"></span><br><span class="line">其中re_install.txt文件中记录的是需要安装包的名称以及对应的版本</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Django-处理请求的过程"><a href="#Django-处理请求的过程" class="headerlink" title="Django 处理请求的过程"></a>Django 处理请求的过程</h2><ol>
<li>请求 /hello/。 </li>
<li>Django 查看 ROOT_URLCONF 设置，找到根 URL 配置。 </li>
<li>Django 比较 URL 配置中的各个 URL 模式，找到与 /hello/ 匹配的那个。 </li>
<li>如果找到匹配的模式，调用对应的视图函数。 </li>
<li>视图函数返回一个 HttpResponse 对象。 </li>
<li>Django 把 HttpResponse 对象转换成正确的 HTTP 响应，得到网页。</li>
</ol>
<h2 id="MVC-模型-视图-控制器设计模式"><a href="#MVC-模型-视图-控制器设计模式" class="headerlink" title="MVC - 模型-视图-控制器设计模式"></a>MVC - 模型-视图-控制器设计模式</h2><ul>
<li><p>模型(M)是数据的表述。它不是真正的数据，而是数据的接口。使用模型从数据库中获取数据时， 无需知道底层数据库错综复杂的知识。模型通常还会为数据库提供一层抽象，这样同一个模型就能使 用不同的数据库。 </p>
</li>
<li><p>视图(V)是你看到的界面。它是模型的表现层。在电脑中，视图是你在浏览器中看到的 Web 应用的 页面，或者是桌面应用的 UI。视图还提供了收集用户输入的接口。 </p>
</li>
<li>控制器(C)控制模型和视图之间的信息流动。它通过程序逻辑判断通过模型从数据库中获取什么信 息，以及把什么信息传给视图。它还通过视图从用户那里收集信息，并且实现业务逻辑:变更视图， 或者通过模型修改数据，或者二者兼具。 </li>
</ul>
<h2 id="MVT-模型-视图-模版设计模式"><a href="#MVT-模型-视图-模版设计模式" class="headerlink" title="MVT - 模型-视图-模版设计模式"></a>MVT - 模型-视图-模版设计模式</h2><ul>
<li>M 表示“模型”，即数据访问层。这一层包含所有与数据相关的功能:访问数据的方式、验证数据的方 式、数据的行为、数据之间的关系。第 4 章将深入探讨 Django 的模型。 </li>
<li>T 表示“模板”，即表现层。这一层包含表现相关的决策:在网页或其他文档类型中如何显示某个东 西。第 3 章将探讨 Django 的模板。 </li>
<li>V 表示“视图”，即业务逻辑层。这一层包含访问模型和选择合适模板的逻辑。你可以把视图看做模型 和模板之间的桥梁。下一章将讨论 Django 的视图。 </li>
</ul>

	
	</div>
  <a type="button" href="/2018/11/12/Django/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2018/11/20/DOM/">关于DOM的要点使用</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2018-11-20  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<blockquote>
<h3 id="一些常用的-HTML-DOM-方法："><a href="#一些常用的-HTML-DOM-方法：" class="headerlink" title="一些常用的 HTML DOM 方法："></a>一些常用的 HTML DOM 方法：</h3><p>getElementById(id) - 获取带有指定 id 的节点（元素）<br>appendChild(node) - 插入新的子节点（元素）<br>首先创建一个节点，<br>然后创建一个文本节点，<br>然后将文本节点添加到LI节点上。<br>最后将节点添加到列表中。<br> appendChild() 方法，将新元素作为父元素的最后一个子元素进行添加。<br>如果不希望如此，您可以使用 insertBefore() 方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;var node = document.createElement(&quot;li&quot;)  #创建了以li节点</span><br><span class="line">&gt;var textnode = document.createTextNode(&quot;里子&quot;) #创建了一个文本节点</span><br><span class="line">&gt;node.appendChild(textnode) #将文本节点textnote添加到li节点node上</span><br><span class="line">&gt;document.getElementById(&quot;d&quot;).appendChild(node) #将节点li添加到列表中</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>removeChild(node) - 删除子节点（元素）<br>先找到需要删除的节点的父节点再用方法删除需要删除的节点<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;var parent=document.getElementById(&quot;div1&quot;);</span><br><span class="line">&gt;var child=document.getElementById(&quot;p&quot;)</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
	
	</div>
  <a type="button" href="/2018/11/20/DOM/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2018/11/20/linux安装软件/">Software and services</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2018-11-20  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h4 id="Linux系统安装软件"><a href="#Linux系统安装软件" class="headerlink" title="Linux系统安装软件:"></a>Linux系统安装软件:</h4><p>1.使用包管理工具 - apt/yum(CentOS,Redhat) / apt (Ubuntu) / deb(Debian)<br>2.源代码构建安装 - 直接下载源代码 用C语言构建工具进行构建<br>3.直接下载二进制程序 - 配置环境变量之后使用</p>
<p>Apache<br>Nginx  - - -&gt; HTTP服务器 - - -&gt; 提供Web应用</p>
<p><strong>internet是基于TCPP/IP模型的四层架构</strong></p>
<blockquote>
<p>应用层 - HTTP(80) / FTP / SSH / QQ / SMTP(25) / POP3(110)<br>传输层 - TCP / UDP - 端到端的传输服务 （TCP可靠通信、流量控制、拥塞控制）<br>网络层 - IP -<br>物理链路层 (网络接口层) - 分帧和校验</p>
</blockquote>
<p><strong>服务端口是对IP地址的扩展，用来区分不同的服务</strong></p>
<hr>
	
	</div>
  <a type="button" href="/2018/11/20/linux安装软件/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2018/11/20/cookbook/">Python_cookbook</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2018-11-20  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<p><strong>持续更新</strong></p>
<h3 id="数据结构和算法"><a href="#数据结构和算法" class="headerlink" title="数据结构和算法"></a>数据结构和算法</h3><hr>
<blockquote>
<p>from collections import deque<br>deque(maxlen=n)构造函数新建一个大小为n的列队，当新的元素加入并且这个队列已满的时候，最老的元素会被自动移除掉</p>
</blockquote>
<blockquote>
<p>import heaps<br>heaps.nlargest(n, nums, key) 在nums中找最大到n个数或者以key为最值寻找<br>heaps.nsmallest(n, nums, key) 在nums中找最小到n个数或者以key为最值寻找</p>
</blockquote>
<blockquote>
<h4 id="字典中的键映射多个值"><a href="#字典中的键映射多个值" class="headerlink" title="字典中的键映射多个值"></a>字典中的键映射多个值</h4><p>from collections import defaultdict<br>a = defaultdict(type) 构造一个字典a且值类型为type<br>a[‘g’].append(1) 向字典a中添加键为g值为1的内容</p>
</blockquote>
<blockquote>
<p>min = min(zip(dict.values(), dict.keys())) 获取字典dict中的最小值和对应的键<br>dict = sorted = sorted(zip(dict.values(), dict.keys()))为dict排序<br>相比用lambda函数来说比较方便</p>
</blockquote>
<blockquote>
<h4 id="序列中出现次数最多的元素"><a href="#序列中出现次数最多的元素" class="headerlink" title="序列中出现次数最多的元素"></a>序列中出现次数最多的元素</h4><p>from collections import Counter<br>word_counts = Counter(str)<br>top_three = word_counts.most_common(n)<br>实例化Counter对象word_counts (字典) 然后调用most_common(n)方法产生一个以元祖为元素的列表元祖内容为出现str序列中n个出现次数最多的元素以及出现总次数<br>实例化的Count对象的特性是它们可以很容易的跟数学运算操作相结合</p>
</blockquote>
	
	</div>
  <a type="button" href="/2018/11/20/cookbook/#more" class="btn btn-default more">Read More</a>
</div>

		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">

   
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="Search" class="st-search-input st-default-search-input form-control">
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			
	<div class="widget">
		<h4>Categories</h4>
		<ul class="tag_box inline list-unstyled">
		
			<li><a href="/categories/Liunx/">Liunx<span>2</span></a></li>
		
			<li><a href="/categories/Python/">Python<span>2</span></a></li>
		
			<li><a href="/categories/web前端/">web前端<span>1</span></a></li>
		
		</ul>
	</div>

		
			
	<div class="widget">
		<h4>Tag Cloud</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/DOM/">DOM<span>1</span></a></li>
		
			<li><a href="/tags/cookbook/">cookbook<span>1</span></a></li>
		
			<li><a href="/tags/Django/">Django<span>1</span></a></li>
		
			<li><a href="/tags/Software-and-services/">Software and services<span>1</span></a></li>
		
			<li><a href="/tags/command/">command<span>1</span></a></li>
		
		 
		</ul>
	</div>


		
			
<div class="widget">
  <h4>Recent Posts</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2018/11/20/cookbook/"><i class="fa fa-file-o"></i>Python_cookbook</a>
      </li>
    
      <li>
        <a href="/2018/11/20/DOM/"><i class="fa fa-file-o"></i>关于DOM的要点使用</a>
      </li>
    
      <li>
        <a href="/2018/11/20/linux安装软件/"><i class="fa fa-file-o"></i>Software and services</a>
      </li>
    
      <li>
        <a href="/2018/11/12/Django/"><i class="fa fa-file-o"></i>Django</a>
      </li>
    
      <li>
        <a href="/2018/10/12/Linux命令/"><i class="fa fa-file-o"></i>command</a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>Links</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="http://www.github.com/GulaMerlin" title="My Github account." target="_blank" ]);"="">My Github</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->
	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2018 Jian Jun
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a>,<a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>,<a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a> and <a href="http://getbootstrap.com/" target="_blank">BOOTSTRA.386</a>. 
     <br> Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind.386</a>.    
</p>
 </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>⬆︎TOP</span>
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



</body>
   </html>
